{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="UTF-8">
    <title>Discover Courses</title>
              <link rel="icon" type="image/png" href="{% static 'images/favicon.png' %}">

     <link rel="stylesheet" href="{% static 'css/course_list.css' %}">

             <link rel="stylesheet" href="{% static 'css/globals.css' %}">



    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" data-rh=true
          name=viewport>
</head>
<body>

<!--svg icons-->
<svg aria-hidden=true id=__SVG_SPRITE_NODE__ style=position:absolute;width:0;height:0>
    <symbol id=user-circle viewBox="10 11 44 44">
        <defs>
            <path d="M32 11c12.2 0 22 9.9 22 22s-9.9 22-22 22-22-9.9-22-22 9.9-22 22-22zm12.046 34.645c3.349-3.194 5.454-7.681 5.454-12.646 0-9.625-7.795-17.5-17.5-17.5-9.625 0-17.5 7.876-17.5 17.5 0 4.965 2.105 9.453 5.454 12.645.047-1.822.46-5.573.722-6.425.29-.943.652-1.813 1.087-2.465a5.475 5.475 0 011.74-1.667c.726-.436 1.595-.653 2.538-.653 0 0 0 .002.002.002l.026-.002c1.665 1.592 3.618 2.389 5.93 2.393 2.315-.005 4.268-.801 5.932-2.392h.027c.944 0 1.814.216 2.539.651a5.482 5.482 0 011.74 1.668c.435.653.797 1.523 1.087 2.465.262.852.675 4.603.722 6.425zM39.25 28.416a7.25 7.25 0 11-14.5 0 7.25 7.25 0 0114.5 0z"
                  id=user-circle_a></path>
        </defs>
        <use xlink:href=#user-circle_a></use>
    </symbol>
    <symbol id=caret viewBox="0 0 113.2 63.1">
        <path d="M6.7 0C2.9 0 0 2.9 0 6.7c0 1.9 1 3.8 1.9 4.8l49.7 49.7c1 1 2.9 1.9 4.8 1.9s3.8-1 4.8-1.9l50.1-49.7c1-1 1.9-2.9 1.9-4.8 0-3.8-2.9-6.7-6.7-6.7"></path>
    </symbol>
    <symbol id=star viewBox="0 0 64 64" xmlns=http://www.w3.org/2000/svg>
        <path d="M54 27.277c0-.652-.492-1.06-1.48-1.218l-13.275-1.931-5.949-12.042C32.962 11.36 32.529 11 32 11s-.962.361-1.296 1.086l-5.949 12.042-13.275 1.93c-.988.16-1.48.567-1.48 1.219 0 .37.222.793.661 1.27l9.625 9.368-2.274 13.232a4.162 4.162 0 00-.053.53c0 .37.093.683.277.939.186.255.463.384.833.384.318 0 .671-.106 1.058-.317L32 46.437l11.873 6.246c.37.21.724.317 1.058.317.353 0 .621-.13.805-.384.186-.256.279-.569.279-.94 0-.228-.01-.406-.027-.529l-2.274-13.232 9.599-9.368c.458-.46.687-.883.687-1.27"></path>
    </symbol>
</svg>

<main id=app style=display:block;width:100%;position:relative>

    <div style=width:inherit>

        <!--top horizontal header-->
        {% if user.role == "career_changer" %}
            {% include 'includes/student_header.html' %}
        {% elif user.role == "training_provider" %}
            {% include 'includes/provider_header.html' %}
        {% else %}
            {% include 'includes/default_header.html' %}
        {% endif %}

        <!--main content-->
        <article compass="[object Object]">

            <div class="Main-Body-Area">

                <!--title and paragraph-->

{% if intro %}

                <div class="Introduction content">

                    <header class="Introduction-Title-And-Content">

                        <div class="Introduction-Text-Outer">
                            <div class="Introduction-Text-Inner">

                                <div class="Introduction-Text-Title">
                                    <h1 class="Introduction-Title">

{{ intro.title }}

                                    </h1>
                                </div>

                                <p class="Introduction-Content" style="margin-top: 1rem !important;">

                                                        {{ intro.content|safe }}





                            </p>

                            </div>

                        </div>

                    </header>

                </div>

{% endif %}
                <!--horizontal-filter-bar-->
                <div class="Horizontal-Filter-Bar-Outer-Container">

                    <div class="Horizontal-Filter-Bar-Inner-Container">
                        <div class="Main-Area Horizontal-Filter-Bar-Content-Area Horizontal-Filter-Container">

                            <div class="Number-Of-Results">
                                <span
                                    data-tracking-id=search-results-count>
                                    {{courses.count}}
                                </span>
                                <span>
                                    results
                                </span>
                            </div>
                            <div class="Horizontal-Filters-Area-Outer-Container">
                                <div class="Horizontal-Filters-Area-Inner-Container">
                                    <div>
                                        <ul class="Applied-Filters-Border">
                                            <li class="Applied-Filters-Outline">
                                                <button aria-label="Clear all filters"
                                                        class="Filters"><span
                                                        class="Filters-Inside">Clear Filters</span>
                                                </button>
                                                
                                            {% if keywords %}
                                            <li class="Applied-Filters-Outline">
                                                <button aria-label="Remove Keywords filter" class="chip__ButtonStyled-sc-mc0uv4-2 Filters Applied-Filters">
                                                    <span class="Filters-Inside">Keywords: {{ keywords }}</span>
                                                    <span class="chip__IconContainer-sc-mc0uv4-1 Applied-Filters-Icon">
                                                        <svg aria-hidden="true" class="Small-Icon" fill="var(--color)" height="8px" viewBox="0 0 38 38" width="8px">
                                                            <g fill-rule="evenodd" stroke="none" stroke-width="1">
                                                                <polygon fill-rule="nonzero" points="33.4 0 19 14.4 4.601 0 0 4.6 14.4 19 0 33.4 4.6 38 19 23.6 33.4 38 38 33.399 23.6 18.999 38 4.6"></polygon>
                                                            </g>
                                                        </svg>
                                                    </span>
                                                </button>
                                            </li>
                                            {% endif %}
                                            {% if provider %}
                                            <li class="Applied-Filters-Outline">
                                                <button aria-label="Remove Provider filter" class="chip__ButtonStyled-sc-mc0uv4-2 Filters Applied-Filters">
                                                    <span class="Filters-Inside">Provider: {{ provider }}</span>
                                                    <span class="chip__IconContainer-sc-mc0uv4-1 Applied-Filters-Icon">
                                                        <svg aria-hidden="true" class="Small-Icon" fill="var(--color)" height="8px" viewBox="0 0 38 38" width="8px">
                                                            <g fill-rule="evenodd" stroke="none" stroke-width="1">
                                                                <polygon fill-rule="nonzero" points="33.4 0 19 14.4 4.601 0 0 4.6 14.4 19 0 33.4 4.6 38 19 23.6 33.4 38 38 33.399 23.6 18.999 38 4.6"></polygon>
                                                            </g>
                                                        </svg>
                                                    </span>
                                                </button>
                                            </li>
                                            {% endif %}
                                            {% if min_rating %}
                                            <li class="Applied-Filters-Outline">
                                                <button aria-label="Remove Min Rating filter" class="chip__ButtonStyled-sc-mc0uv4-2 Filters Applied-Filters">
                                                    <span class="Filters-Inside">Min Rating: {{ min_rating }}</span>
                                                    <span class="chip__IconContainer-sc-mc0uv4-1 Applied-Filters-Icon">
                                                        <svg aria-hidden="true" class="Small-Icon" fill="var(--color)" height="8px" viewBox="0 0 38 38" width="8px">
                                                            <g fill-rule="evenodd" stroke="none" stroke-width="1">
                                                                <polygon fill-rule="nonzero" points="33.4 0 19 14.4 4.601 0 0 4.6 14.4 19 0 33.4 4.6 38 19 23.6 33.4 38 38 33.399 23.6 18.999 38 4.6"></polygon>
                                                            </g>
                                                        </svg>
                                                    </span>
                                                </button>
                                            </li>
                                            {% endif %}
                                            {% if min_cost %}
                                            <li class="Applied-Filters-Outline">
                                                <button aria-label="Remove Min Cost filter" class="chip__ButtonStyled-sc-mc0uv4-2 Filters Applied-Filters">
                                                    <span class="Filters-Inside">Min Cost: {{ min_cost }}</span>
                                                    <span class="chip__IconContainer-sc-mc0uv4-1 Applied-Filters-Icon">
                                                        <svg aria-hidden="true" class="Small-Icon" fill="var(--color)" height="8px" viewBox="0 0 38 38" width="8px">
                                                            <g fill-rule="evenodd" stroke="none" stroke-width="1">
                                                                <polygon fill-rule="nonzero" points="33.4 0 19 14.4 4.601 0 0 4.6 14.4 19 0 33.4 4.6 38 19 23.6 33.4 38 38 33.399 23.6 18.999 38 4.6"></polygon>
                                                            </g>
                                                        </svg>
                                                    </span>
                                                </button>
                                            </li>
                                            {% endif %}
                                            {% if max_cost %}
                                            <li class="Applied-Filters-Outline">
                                                <button aria-label="Remove Max Cost filter" class="chip__ButtonStyled-sc-mc0uv4-2 Filters Applied-Filters">
                                                    <span class="Filters-Inside">Max Cost: {{ max_cost }}</span>
                                                    <span class="chip__IconContainer-sc-mc0uv4-1 Applied-Filters-Icon">
                                                        <svg aria-hidden="true" class="Small-Icon" fill="var(--color)" height="8px" viewBox="0 0 38 38" width="8px">
                                                            <g fill-rule="evenodd" stroke="none" stroke-width="1">
                                                                <polygon fill-rule="nonzero" points="33.4 0 19 14.4 4.601 0 0 4.6 14.4 19 0 33.4 4.6 38 19 23.6 33.4 38 38 33.399 23.6 18.999 38 4.6"></polygon>
                                                            </g>
                                                        </svg>
                                                    </span>
                                                </button>
                                            </li>
                                            {% endif %}
                                            {% if location %}
                                            <li class="Applied-Filters-Outline">
                                                <button aria-label="Remove Location filter" class="chip__ButtonStyled-sc-mc0uv4-2 Filters Applied-Filters">
                                                    <span class="Filters-Inside">Location: {{ location }}</span>
                                                    <span class="chip__IconContainer-sc-mc0uv4-1 Applied-Filters-Icon">
                                                        <svg aria-hidden="true" class="Small-Icon" fill="var(--color)" height="8px" viewBox="0 0 38 38" width="8px">
                                                            <g fill-rule="evenodd" stroke="none" stroke-width="1">
                                                                <polygon fill-rule="nonzero" points="33.4 0 19 14.4 4.601 0 0 4.6 14.4 19 0 33.4 4.6 38 19 23.6 33.4 38 38 33.399 23.6 18.999 38 4.6"></polygon>
                                                            </g>
                                                        </svg>
                                                    </span>
                                                </button>
                                            </li>
                                            {% endif %}
                                            {% if min_hours %}
                                            <li class="Applied-Filters-Outline">
                                                <button aria-label="Remove Min Hours filter" class="chip__ButtonStyled-sc-mc0uv4-2 Filters Applied-Filters">
                                                    <span class="Filters-Inside">Min Hours: {{ min_hours }}</span>
                                                    <span class="chip__IconContainer-sc-mc0uv4-1 Applied-Filters-Icon">
                                                        <svg aria-hidden="true" class="Small-Icon" fill="var(--color)" height="8px" viewBox="0 0 38 38" width="8px">
                                                            <g fill-rule="evenodd" stroke="none" stroke-width="1">
                                                                <polygon fill-rule="nonzero" points="33.4 0 19 14.4 4.601 0 0 4.6 14.4 19 0 33.4 4.6 38 19 23.6 33.4 38 38 33.399 23.6 18.999 38 4.6"></polygon>
                                                            </g>
                                                        </svg>
                                                    </span>
                                                </button>
                                            </li>
                                            {% endif %}

                                        <script>
                                            document.addEventListener('DOMContentLoaded', function() {
                                                const clearFiltersBtn = document.querySelector('button.Filters span.Filters-Inside').closest('button');
                                                if (clearFiltersBtn) {
                                                  clearFiltersBtn.addEventListener('click', function() {
                                                    window.location.href = window.location.pathname;
                                                  });
                                                }
                                                
                                              
                                                // deal with single filter
                                                const appliedFilters = document.querySelectorAll('button.Applied-Filters');
                                                appliedFilters.forEach(filter => {
                                                  filter.addEventListener('click', function() {
                                                    // get the current URL and its parameters
                                                    const url = new URL(window.location.href);
                                                    const params = url.searchParams;
                                                    const paramNames = Array.from(params.keys());
                                                    
                                                    // get the filter text and split it to get the parameter name
                                                    const filterText = this.querySelector('.Filters-Inside').textContent;
                                                    const filterParts = filterText.split(':');
                                                    
                                                    if (filterParts.length >= 2) {
                                                        const filterType = filterParts[0].trim().toLowerCase();
                                                        
                                                        // add the filter type to the URL parameters
                                                        let paramName;
                                                        switch (filterType) {
                                                            case 'keywords':
                                                            paramName = 'keywords';
                                                            break;
                                                            case 'provider':
                                                            paramName = 'provider';
                                                            break;
                                                            case 'min rating':
                                                            paramName = 'min_rating';
                                                            break;
                                                            case 'min cost':
                                                            paramName = 'min_cost';
                                                            break;
                                                            case 'max cost':
                                                            paramName = 'max_cost';
                                                            break;
                                                            case 'location':
                                                            paramName = 'location';
                                                            break;
                                                            case 'min hours':
                                                            paramName = 'min_hours';
                                                            break;
                                                            default:
                                                            paramName = filterType;
                                                        }
                                                        
                                                        // set the parameter as "" from the URL
                                                        params.set(paramName, '');

                                                        window.location.href = url.toString();
                                                      
                                                    }
                                                  });
                                                });
                                                
                                                const filterIcons = document.querySelectorAll('.Applied-Filters-Icon');
                                                filterIcons.forEach(icon => {
                                                  icon.addEventListener('click', function(event) {
                                                    event.stopPropagation();
                                                    
                                                    this.closest('.Applied-Filters').click();
                                                  });
                                                });
                                              });
                                            </script>
                                        </ul>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>

                <div class="Lower-Main-Body-Area">

                    <div class="Main-Area Lower-Main-Body-Area-Border Content-Container">
                        <div class="Lower-Main-Body-Area-Inner">
                            <div class="Lower-Main-Body-Area-Content">

                                <!--left-side filters-->
                                <form action="{% url 'course_map' %}" method="GET" id="searchForm">

                                    <fieldset
                                        class="field-set__FieldSetStyled-sc-b2ie46-0 Filter-Section form__ConnectedFieldSetStyled-sr2rn8-1 Filter-Section-Outline"
                                        name="schoolName">
                                        <legend class=" Filter-Section-Title-Outer">
                                            <div class="field-set__LegendContent-sc-b2ie46-2 Filter-Section-Title-Inner">
                                                Keywords
                                            </div>
                                        </legend>
                                        <div class="field-set__CollapsibleContainer-sc-b2ie46-4 Filter-Section-Action-Outer">
                                            <div class="field-set__ContentContainer-sc-b2ie46-5 Filter-Section-Action-Inner">
                                                <div class="autosuggest__Container-sc-hb0rq-0 Input">
                                                    <div aria-expanded=false aria-haspopup=listbox
                                                        aria-owns=react-auto
                                                        class=react-autosuggest__container
                                                        role=combobox><input aria-autocomplete=list
                                                            aria-controls=react-auto
                                                            autocomplete=off
                                                            class="TextInput__TextInputDeprecated-ob7d2g-2 Input-Field form__TextInputStyled-sr2rn8-2 Filter-Section-Outline-Input react-autosuggest__input"
                                                            placeholder="Keywords"
                                                            name="keywords"
                                                            type=text
                                                            value="{{ keywords }}">
                                                            <div class="react-autosuggest__suggestions-container sf-hidden"
                                                                id=react-auto
                                                                role=listbox></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </fieldset>

                                                                        <fieldset
                                        class="field-set__FieldSetStyled-sc-b2ie46-0 Filter-Section form__ConnectedFieldSetStyled-sr2rn8-1 Filter-Section-Outline"
                                        name="schoolName">
                                        <legend class=" Filter-Section-Title-Outer">
                                            <div class="field-set__LegendContent-sc-b2ie46-2 Filter-Section-Title-Inner">
                                                Provider
                                            </div>
                                        </legend>
                                        <div class="field-set__CollapsibleContainer-sc-b2ie46-4 Filter-Section-Action-Outer">
                                            <div class="field-set__ContentContainer-sc-b2ie46-5 Filter-Section-Action-Inner">
                                                <div class="autosuggest__Container-sc-hb0rq-0 Input">
                                                    <div aria-expanded=false aria-haspopup=listbox
                                                        aria-owns=react-auto
                                                        class=react-autosuggest__container
                                                        role=combobox><input aria-autocomplete=list
                                                            aria-controls=react-auto
                                                            autocomplete=off
                                                            class="TextInput__TextInputDeprecated-ob7d2g-2 Input-Field form__TextInputStyled-sr2rn8-2 Filter-Section-Outline-Input react-autosuggest__input"
                                                            placeholder="Provider"
                                                            name="provider"
                                                            type=text
                                                            value="{{ provider }}">
                                                            <div class="react-autosuggest__suggestions-container sf-hidden"
                                                                role=listbox></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </fieldset>

                                    <fieldset
                                        class="field-set__FieldSetStyled-sc-b2ie46-0 Filter-Section form__ConnectedFieldSetStyled-sr2rn8-1 Filter-Section-Outline"
                                        name="min rating">
                                        <legend class=" Filter-Section-Title-Outer">
                                            <div class="field-set__LegendContent-sc-b2ie46-2 Filter-Section-Title-Inner">
                                                Min Rating
                                            </div>
                                        </legend>
                                        <div class="field-set__CollapsibleContainer-sc-b2ie46-4 Filter-Section-Action-Outer">
                                            <div class="field-set__ContentContainer-sc-b2ie46-5 Filter-Section-Action-Inner">
                                                <div class="autosuggest__Container-sc-hb0rq-0 Input">
                                                    <div aria-expanded=false aria-haspopup=listbox
                                                        aria-owns=react-auto
                                                        class=react-autosuggest__container
                                                        role=combobox><input aria-autocomplete=list
                                                            aria-controls=react-auto
                                                            autocomplete=off
                                                            class="TextInput__TextInputDeprecated-ob7d2g-2 Input-Field form__TextInputStyled-sr2rn8-2 Filter-Section-Outline-Input react-autosuggest__input"
                                                            placeholder="Min Rating"
                                                            name="min_rating"
                                                            type="number" step="0.1" min="0" max="5"
                                                            value="{{ min_rating }}">
                                                            <div class="react-autosuggest__suggestions-container sf-hidden"
                                                                role=listbox></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </fieldset>

                                    <fieldset
                                        class="field-set__FieldSetStyled-sc-b2ie46-0 Filter-Section form__ConnectedFieldSetStyled-sr2rn8-1 Filter-Section-Outline"
                                        name="min cost">
                                        <legend class=" Filter-Section-Title-Outer">
                                            <div class="field-set__LegendContent-sc-b2ie46-2 Filter-Section-Title-Inner">
                                                Min Cost
                                            </div>
                                        </legend>
                                        <div class="field-set__CollapsibleContainer-sc-b2ie46-4 Filter-Section-Action-Outer">
                                            <div class="field-set__ContentContainer-sc-b2ie46-5 Filter-Section-Action-Inner">
                                                <div class="autosuggest__Container-sc-hb0rq-0 Input">
                                                    <div aria-expanded=false aria-haspopup=listbox
                                                        aria-owns=react-auto
                                                        class=react-autosuggest__container
                                                        role=combobox><input aria-autocomplete=list
                                                            aria-controls=react-auto
                                                            autocomplete=off
                                                            class="TextInput__TextInputDeprecated-ob7d2g-2 Input-Field form__TextInputStyled-sr2rn8-2 Filter-Section-Outline-Input react-autosuggest__input"
                                                            name="min_cost"
                                                            placeholder="Min Cost"
                                                            type="number"
                                                            step="1" min="0"
                                                            value="{{ min_cost }}">
                                                            <div class="react-autosuggest__suggestions-container sf-hidden"
                                                                role=listbox></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </fieldset>

                                    <fieldset
                                        class="field-set__FieldSetStyled-sc-b2ie46-0 Filter-Section form__ConnectedFieldSetStyled-sr2rn8-1 Filter-Section-Outline"
                                        name="max cost">
                                        <legend class=" Filter-Section-Title-Outer">
                                            <div class="field-set__LegendContent-sc-b2ie46-2 Filter-Section-Title-Inner">
                                                Max Cost
                                            </div>
                                        </legend>
                                        <div class="field-set__CollapsibleContainer-sc-b2ie46-4 Filter-Section-Action-Outer">
                                            <div class="field-set__ContentContainer-sc-b2ie46-5 Filter-Section-Action-Inner">
                                                <div class="autosuggest__Container-sc-hb0rq-0 Input">
                                                    <div aria-expanded=false aria-haspopup=listbox
                                                        aria-owns=react-auto
                                                        class=react-autosuggest__container
                                                        role=combobox><input aria-autocomplete=list
                                                            aria-controls=react-auto
                                                            autocomplete=off
                                                            class="TextInput__TextInputDeprecated-ob7d2g-2 Input-Field form__TextInputStyled-sr2rn8-2 Filter-Section-Outline-Input react-autosuggest__input"
                                                            name="max_cost"
                                                            placeholder="Max Cost"  min="0"
                                                            type="number"
                                                            step="1"
                                                            value="{{ max_cost }}">
                                                            <div class="react-autosuggest__suggestions-container sf-hidden"
                                                                role=listbox></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </fieldset>

                                    <fieldset
                                        class="field-set__FieldSetStyled-sc-b2ie46-0 Filter-Section form__ConnectedFieldSetStyled-sr2rn8-1 Filter-Section-Outline"
                                        name="location">
                                        <legend class=" Filter-Section-Title-Outer">
                                            <div class="field-set__LegendContent-sc-b2ie46-2 Filter-Section-Title-Inner">
                                                Location
                                            </div>
                                        </legend>
                                        <div class="field-set__CollapsibleContainer-sc-b2ie46-4 Filter-Section-Action-Outer">
                                            <div class="field-set__ContentContainer-sc-b2ie46-5 Filter-Section-Action-Inner">
                                                <div class="autosuggest__Container-sc-hb0rq-0 Input">
                                                    <div aria-expanded=false aria-haspopup=listbox
                                                        aria-owns=location-input
                                                        class=react-autosuggest__container
                                                        role=combobox><input aria-autocomplete=list
                                                            aria-controls=location-input
                                                            autocomplete=off
                                                            class="TextInput__TextInputDeprecated-ob7d2g-2 Input-Field form__TextInputStyled-sr2rn8-2 Filter-Section-Outline-Input react-autosuggest__input"
                                                            name="location"
                                                            placeholder="City, State or ZIP"
                                                            type=text
                                                            value="{{ location }}">
                                                            <div class="react-autosuggest__suggestions-container sf-hidden"
                                                                id=location-input
                                                                role=listbox>
                                                            </div>
                                                    </div>
                                                </div>
                                                <div style="margin-bottom: 0.5rem !important;"></div>
                                                {%comment %}
                                                <span class="select__Container-sc-i9bbt3-3 All-Distances-Outer-Frame"
                                                    style="--width:100%">
                                                    <label class="select__LabelStyled-sc-i9bbt3-0 All-Distances-Inner-Frame">
                                                        <select class="select__SelectStyled-sc-i9bbt3-1 All-Distances-Content-Box" name="distance">
                                                            <option selected value>(Not Working) All Distances
                                                            <option value=25>Within 25 miles
                                                            <option value=50>Within 50 miles
                                                            <option value=100>Within 100 miles
                                                            <option value=250>Within 250 miles
                                                        </select>
                                                    <svg class="Small-Icon Dropdown-Icon" fill=var(--gray-30) viewBox="0 0 64 64">
                                                        <path d="M33.3,39.8l13.1-13.1c0.4-0.4,0.6-0.8,0.6-1.3c0-1-0.9-1.9-1.9-1.9H18.8c-1,0-1.9,0.8-1.9,1.9  c0,0.5,0.2,1,0.6,1.3l13.1,13.1c0.4,0.4,0.8,0.6,1.3,0.6S33,40.2,33.3,39.8"></path>
                                                    </svg>
                                                </label>
                                                </span>
                                                {% endcomment %}
                                            </div>
                                        </div>
                                        <script>
                                            document.addEventListener("DOMContentLoaded", function () {
                                                var selectElement = document.querySelector(".All-Distances-Content-Box");

                                                selectElement.addEventListener("change", function () {
                                                    if (selectElement.value === "") {
                                                        selectElement.style.color = "darkgray"; // Keep dark gray for "All Distances"
                                                    } else {
                                                        selectElement.style.color = "black"; // Change to black for other options
                                                    }
                                                });
                                            });



                                        </script>
                                    </fieldset>

                                    <fieldset
                                        class="field-set__FieldSetStyled-sc-b2ie46-0 Filter-Section form__ConnectedFieldSetStyled-sr2rn8-1 Filter-Section-Outline"
                                        name="min hours">
                                        <legend class=" Filter-Section-Title-Outer">
                                            <div class="field-set__LegendContent-sc-b2ie46-2 Filter-Section-Title-Inner">
                                                Min Hours
                                            </div>
                                        </legend>
                                        <div class="field-set__CollapsibleContainer-sc-b2ie46-4 Filter-Section-Action-Outer">
                                            <div class="field-set__ContentContainer-sc-b2ie46-5 Filter-Section-Action-Inner">
                                                <div class="autosuggest__Container-sc-hb0rq-0 Input">
                                                    <div aria-expanded=false aria-haspopup=listbox
                                                        aria-owns=react-auto
                                                        class=react-autosuggest__container
                                                        role=combobox><input aria-autocomplete=list
                                                            aria-controls=react-auto
                                                            autocomplete=off
                                                            class="TextInput__TextInputDeprecated-ob7d2g-2 Input-Field form__TextInputStyled-sr2rn8-2 Filter-Section-Outline-Input react-autosuggest__input"
                                                            name="min_hours"
                                                            placeholder="Min Hours"
                                                            type="number"
                                                            step="1"  min="0"
                                                            value="{{min_hours}}">
                                                            <div class="react-autosuggest__suggestions-container sf-hidden"
                                                                role=listbox></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </fieldset>

                                    <fieldset class="Filter-Section Filter-Section-Outline" style="border-bottom: none;">

                                        <legend class="Filter-Section-Title-Outer">
                                            <div class="Filter-Section-Title-Inner">
                                                Apply Filters
                                            </div>
                                        </legend>

                                        <div class="Filter-Section-Action-Outer">
                                            <div class="Filter-Section-Action-Inner">
                                                <button type="submit" class="Apply-Filters-Button">
                                                    Filter Your Search
                                                </button>
                                            </div>
                                        </div>
                                    </fieldset>

                                </form>

                                <!--courses-->
                                <div class="All-Course-Container" id ="All-Course-Container">
    <div id="map" style="border-radius: 10px; height: 984px;"></div>
                                </div>

                            </div>
                        </div>
                    </div>

                </div>

            </div>


        </article>



        <hr style="margin-top: 8px; border:none; border-bottom: 1px solid rgb(211, 215, 220)!important;">

            <!--footer-->

        {% include 'includes/footer.html' %}

        </div>
    </main>






    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCawC4Ts27j8dsyhx_sw8_EDCCA1UOT5G0"></script>
    <script>
        let map;
        let markers = [];


        function initMap() {
            const nyc = { lat: 40.7128, lng: -74.0060 };
            map = new google.maps.Map(document.getElementById("map"), {
                zoom: 12,
                center: nyc
            });


            // use data passed from Django template
            const courseMapData = JSON.parse('{{ course_map_data|escapejs }}');
            
            // clear all markers
            markers.forEach(marker => marker.setMap(null));
            markers = [];

            if (courseMapData.length === 0) {
                const mapContainer = document.getElementById("map");
                mapContainer.innerHTML = '<div style="display: flex; justify-content: center; align-items: center; height: 100%; background-color: #f8f9fa;"><p style="font-size: 18px; color: #6c757d;">没有找到符合条件的课程位置</p></div>';
                return;
            }

            // add markers to the map
            courseMapData.forEach((course, index) => {
                if (course.latitude && course.longitude) {
                    const marker = new google.maps.Marker({
                        position: { lat: course.latitude, lng: course.longitude },
                        map: map,
                        title: course.name
                    });

                    const infoWindow = new google.maps.InfoWindow({
                        content: `<a href="/courses/${course.course_id}/" target="_blank" style="font-weight: bold; text-decoration: none;">${course.name}</a>`
                    });

                    marker.addListener("click", function () {
                        infoWindow.open(map, marker);
                    });

                    markers.push(marker);

                    if (index === 0 && markers.length > 0) {
                        map.setCenter({ lat: course.latitude, lng: course.longitude });
                    }
                }
            });
            
            if (markers.length > 0) {
                const bounds = new google.maps.LatLngBounds();
                markers.forEach(marker => {
                    bounds.extend(marker.getPosition());
                });
                map.fitBounds(bounds);

                google.maps.event.addListenerOnce(map, 'bounds_changed', function() {
                    if (map.getZoom() > 14) map.setZoom(14);
                    if (map.getZoom() < 10) map.setZoom(10);

                    map.setCenter(nyc);
                });
            } 
        }

        document.getElementById("searchForm").addEventListener("submit", function(e) {
        });
        window.onload = initMap;
    </script>








</body>
</html>




