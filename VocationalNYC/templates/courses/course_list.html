{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="UTF-8">
    <title>Discover Courses</title>

    <link rel="icon" type="image/png" href="{% static 'images/favicon.png' %}">

     <link rel="stylesheet" href="{% static 'css/course_list.css' %}">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

             <link rel="stylesheet" href="{% static 'css/globals.css' %}">

<style>
    html, body {
    height: 100%;
    overflow: auto;
    scrollbar-width: none; /* Firefox */
    -ms-overflow-style: none; /* IE and Edge */
          background-color: var(--light-peach)!important;

}

html::-webkit-scrollbar,
body::-webkit-scrollbar {
    display: none; /* Chrome, Safari, Opera */
}
</style>

    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" data-rh=true
          name=viewport>

</head>
<body>

<!--svg icons-->
<svg aria-hidden=true id=__SVG_SPRITE_NODE__ style=position:absolute;width:0;height:0>
    <symbol id=user-circle viewBox="10 11 44 44">
        <defs>
            <path d="M32 11c12.2 0 22 9.9 22 22s-9.9 22-22 22-22-9.9-22-22 9.9-22 22-22zm12.046 34.645c3.349-3.194 5.454-7.681 5.454-12.646 0-9.625-7.795-17.5-17.5-17.5-9.625 0-17.5 7.876-17.5 17.5 0 4.965 2.105 9.453 5.454 12.645.047-1.822.46-5.573.722-6.425.29-.943.652-1.813 1.087-2.465a5.475 5.475 0 011.74-1.667c.726-.436 1.595-.653 2.538-.653 0 0 0 .002.002.002l.026-.002c1.665 1.592 3.618 2.389 5.93 2.393 2.315-.005 4.268-.801 5.932-2.392h.027c.944 0 1.814.216 2.539.651a5.482 5.482 0 011.74 1.668c.435.653.797 1.523 1.087 2.465.262.852.675 4.603.722 6.425zM39.25 28.416a7.25 7.25 0 11-14.5 0 7.25 7.25 0 0114.5 0z"
                  id=user-circle_a></path>
        </defs>
        <use xlink:href=#user-circle_a></use>
    </symbol>
    <symbol id=caret viewBox="0 0 113.2 63.1">
        <path d="M6.7 0C2.9 0 0 2.9 0 6.7c0 1.9 1 3.8 1.9 4.8l49.7 49.7c1 1 2.9 1.9 4.8 1.9s3.8-1 4.8-1.9l50.1-49.7c1-1 1.9-2.9 1.9-4.8 0-3.8-2.9-6.7-6.7-6.7"></path>
    </symbol>
    <symbol id=star viewBox="0 0 64 64" xmlns=http://www.w3.org/2000/svg>
        <path d="M54 27.277c0-.652-.492-1.06-1.48-1.218l-13.275-1.931-5.949-12.042C32.962 11.36 32.529 11 32 11s-.962.361-1.296 1.086l-5.949 12.042-13.275 1.93c-.988.16-1.48.567-1.48 1.219 0 .37.222.793.661 1.27l9.625 9.368-2.274 13.232a4.162 4.162 0 00-.053.53c0 .37.093.683.277.939.186.255.463.384.833.384.318 0 .671-.106 1.058-.317L32 46.437l11.873 6.246c.37.21.724.317 1.058.317.353 0 .621-.13.805-.384.186-.256.279-.569.279-.94 0-.228-.01-.406-.027-.529l-2.274-13.232 9.599-9.368c.458-.46.687-.883.687-1.27"></path>
    </symbol>
</svg>

<main id=app style=display:block;width:100%;position:relative>

    <div style=width:inherit>




        <!--top horizontal header-->
        {% if user.role == "career_changer" %}
            {% include 'includes/student_header.html' %}
        {% elif user.role == "training_provider" %}
            {% include 'includes/provider_header.html' %}
        {% else %}
            {% include 'includes/default_header.html' %}
        {% endif %}

        <!--main content-->
        <article compass="[object Object]">

            <div class="Main-Body-Area">

                <!--title and paragraph-->
                <div class="Introduction content">

                    <header class="Introduction-Title-And-Content">

                        <div class="Introduction-Text-Outer">
                            <div class="Introduction-Text-Inner">

                                <div class="Introduction-Text-Title">
                                    <h1 class="Introduction-Title">
                                        Discover Courses to Advance Your Career
                                    </h1>
                                </div>

                                <p class="Introduction-Content" style="margin-top: 1rem !important;">
                                    Explore a wide range of vocational programs designed to boost your skills and expand your career opportunities. Whether you're aiming to enhance your current expertise or embark on a new career path, you'll find flexible and affordable options that suit your needs.<br>Use the filters to refine your search by cost, location, and duration to identify the perfect course for you. Each listing includes detailed descriptions, costs, and learning outcomes to ensure you make an informed decision. Start discovering today and unlock new opportunities for growth and success.
                                </p>

                            </div>

                        </div>

                    </header>

                </div>


                <!--horizontal-filter-bar-->
                <div class="Horizontal-Filter-Bar-Outer-Container">

                    <div class="Horizontal-Filter-Bar-Inner-Container">
                        <div class="Main-Area Horizontal-Filter-Bar-Content-Area Horizontal-Filter-Container">

                            <div class="Number-Of-Results">
                                <span
                                    data-tracking-id=search-results-count>
                                    {{courses.count}}
                                </span>
                                <span>
                                    results
                                </span>
                            </div>
                            <div class="Horizontal-Filters-Area-Outer-Container">
                                <div class="Horizontal-Filters-Area-Inner-Container">
                                    <div>
                                        <ul class="Applied-Filters-Border">
                                            <li class="Applied-Filters-Outline">
                                                <button aria-label="Clear all filters"
                                                        class="Filters"><span
                                                        class="Filters-Inside">Clear Filters</span>
                                                </button>
                                                
                                            {% if keywords %}
                                            <li class="Applied-Filters-Outline">
                                                <button aria-label="Remove Keywords filter" class="chip__ButtonStyled-sc-mc0uv4-2 Filters Applied-Filters">
                                                    <span class="Filters-Inside">Keywords: {{ keywords }}</span>
                                                    <span class="chip__IconContainer-sc-mc0uv4-1 Applied-Filters-Icon">
                                                        <svg aria-hidden="true" class="Small-Icon" fill="var(--color)" height="8px" viewBox="0 0 38 38" width="8px">
                                                            <g fill-rule="evenodd" stroke="none" stroke-width="1">
                                                                <polygon fill-rule="nonzero" points="33.4 0 19 14.4 4.601 0 0 4.6 14.4 19 0 33.4 4.6 38 19 23.6 33.4 38 38 33.399 23.6 18.999 38 4.6"></polygon>
                                                            </g>
                                                        </svg>
                                                    </span>
                                                </button>
                                            </li>
                                            {% endif %}
                                            {% if provider %}
                                            <li class="Applied-Filters-Outline">
                                                <button aria-label="Remove Provider filter" class="chip__ButtonStyled-sc-mc0uv4-2 Filters Applied-Filters">
                                                    <span class="Filters-Inside">Provider: {{ provider }}</span>
                                                    <span class="chip__IconContainer-sc-mc0uv4-1 Applied-Filters-Icon">
                                                        <svg aria-hidden="true" class="Small-Icon" fill="var(--color)" height="8px" viewBox="0 0 38 38" width="8px">
                                                            <g fill-rule="evenodd" stroke="none" stroke-width="1">
                                                                <polygon fill-rule="nonzero" points="33.4 0 19 14.4 4.601 0 0 4.6 14.4 19 0 33.4 4.6 38 19 23.6 33.4 38 38 33.399 23.6 18.999 38 4.6"></polygon>
                                                            </g>
                                                        </svg>
                                                    </span>
                                                </button>
                                            </li>
                                            {% endif %}
                                            {% if min_rating %}
                                            <li class="Applied-Filters-Outline">
                                                <button aria-label="Remove Min Rating filter" class="chip__ButtonStyled-sc-mc0uv4-2 Filters Applied-Filters">
                                                    <span class="Filters-Inside">Min Rating: {{ min_rating }}</span>
                                                    <span class="chip__IconContainer-sc-mc0uv4-1 Applied-Filters-Icon">
                                                        <svg aria-hidden="true" class="Small-Icon" fill="var(--color)" height="8px" viewBox="0 0 38 38" width="8px">
                                                            <g fill-rule="evenodd" stroke="none" stroke-width="1">
                                                                <polygon fill-rule="nonzero" points="33.4 0 19 14.4 4.601 0 0 4.6 14.4 19 0 33.4 4.6 38 19 23.6 33.4 38 38 33.399 23.6 18.999 38 4.6"></polygon>
                                                            </g>
                                                        </svg>
                                                    </span>
                                                </button>
                                            </li>
                                            {% endif %}
                                            {% if min_cost %}
                                            <li class="Applied-Filters-Outline">
                                                <button aria-label="Remove Min Cost filter" class="chip__ButtonStyled-sc-mc0uv4-2 Filters Applied-Filters">
                                                    <span class="Filters-Inside">Min Cost: {{ min_cost }}</span>
                                                    <span class="chip__IconContainer-sc-mc0uv4-1 Applied-Filters-Icon">
                                                        <svg aria-hidden="true" class="Small-Icon" fill="var(--color)" height="8px" viewBox="0 0 38 38" width="8px">
                                                            <g fill-rule="evenodd" stroke="none" stroke-width="1">
                                                                <polygon fill-rule="nonzero" points="33.4 0 19 14.4 4.601 0 0 4.6 14.4 19 0 33.4 4.6 38 19 23.6 33.4 38 38 33.399 23.6 18.999 38 4.6"></polygon>
                                                            </g>
                                                        </svg>
                                                    </span>
                                                </button>
                                            </li>
                                            {% endif %}
                                            {% if max_cost %}
                                            <li class="Applied-Filters-Outline">
                                                <button aria-label="Remove Max Cost filter" class="chip__ButtonStyled-sc-mc0uv4-2 Filters Applied-Filters">
                                                    <span class="Filters-Inside">Max Cost: {{ max_cost }}</span>
                                                    <span class="chip__IconContainer-sc-mc0uv4-1 Applied-Filters-Icon">
                                                        <svg aria-hidden="true" class="Small-Icon" fill="var(--color)" height="8px" viewBox="0 0 38 38" width="8px">
                                                            <g fill-rule="evenodd" stroke="none" stroke-width="1">
                                                                <polygon fill-rule="nonzero" points="33.4 0 19 14.4 4.601 0 0 4.6 14.4 19 0 33.4 4.6 38 19 23.6 33.4 38 38 33.399 23.6 18.999 38 4.6"></polygon>
                                                            </g>
                                                        </svg>
                                                    </span>
                                                </button>
                                            </li>
                                            {% endif %}
                                            {% if location %}
                                            <li class="Applied-Filters-Outline">
                                                <button aria-label="Remove Location filter" class="chip__ButtonStyled-sc-mc0uv4-2 Filters Applied-Filters">
                                                    <span class="Filters-Inside">Location: {{ location }}</span>
                                                    <span class="chip__IconContainer-sc-mc0uv4-1 Applied-Filters-Icon">
                                                        <svg aria-hidden="true" class="Small-Icon" fill="var(--color)" height="8px" viewBox="0 0 38 38" width="8px">
                                                            <g fill-rule="evenodd" stroke="none" stroke-width="1">
                                                                <polygon fill-rule="nonzero" points="33.4 0 19 14.4 4.601 0 0 4.6 14.4 19 0 33.4 4.6 38 19 23.6 33.4 38 38 33.399 23.6 18.999 38 4.6"></polygon>
                                                            </g>
                                                        </svg>
                                                    </span>
                                                </button>
                                            </li>
                                            {% endif %}
                                            {% if min_hours %}
                                            <li class="Applied-Filters-Outline">
                                                <button aria-label="Remove Min Hours filter" class="chip__ButtonStyled-sc-mc0uv4-2 Filters Applied-Filters">
                                                    <span class="Filters-Inside">Min Hours: {{ min_hours }}</span>
                                                    <span class="chip__IconContainer-sc-mc0uv4-1 Applied-Filters-Icon">
                                                        <svg aria-hidden="true" class="Small-Icon" fill="var(--color)" height="8px" viewBox="0 0 38 38" width="8px">
                                                            <g fill-rule="evenodd" stroke="none" stroke-width="1">
                                                                <polygon fill-rule="nonzero" points="33.4 0 19 14.4 4.601 0 0 4.6 14.4 19 0 33.4 4.6 38 19 23.6 33.4 38 38 33.399 23.6 18.999 38 4.6"></polygon>
                                                            </g>
                                                        </svg>
                                                    </span>
                                                </button>
                                            </li>
                                            {% endif %}

                                        <script>
                                            document.addEventListener('DOMContentLoaded', function() {
                                                const clearFiltersBtn = document.querySelector('button.Filters span.Filters-Inside').closest('button');
                                                if (clearFiltersBtn) {
                                                  clearFiltersBtn.addEventListener('click', function() {
                                                    window.location.href = window.location.pathname;
                                                  });
                                                }
                                                
                                              
                                                // deal with single filter
                                                const appliedFilters = document.querySelectorAll('button.Applied-Filters');
                                                appliedFilters.forEach(filter => {
                                                  filter.addEventListener('click', function() {
                                                    // get the current URL and its parameters
                                                    const url = new URL(window.location.href);
                                                    const params = url.searchParams;
                                                    const paramNames = Array.from(params.keys());
                                                    
                                                    // get the filter text and split it to get the parameter name
                                                    const filterText = this.querySelector('.Filters-Inside').textContent;
                                                    const filterParts = filterText.split(':');
                                                    
                                                    if (filterParts.length >= 2) {
                                                        const filterType = filterParts[0].trim().toLowerCase();
                                                        
                                                        // add the filter type to the URL parameters
                                                        let paramName;
                                                        switch (filterType) {
                                                            case 'keywords':
                                                            paramName = 'keywords';
                                                            break;
                                                            case 'provider':
                                                            paramName = 'provider';
                                                            break;
                                                            case 'min rating':
                                                            paramName = 'min_rating';
                                                            break;
                                                            case 'min cost':
                                                            paramName = 'min_cost';
                                                            break;
                                                            case 'max cost':
                                                            paramName = 'max_cost';
                                                            break;
                                                            case 'location':
                                                            paramName = 'location';
                                                            break;
                                                            case 'min hours':
                                                            paramName = 'min_hours';
                                                            break;
                                                            default:
                                                            paramName = filterType;
                                                        }
                                                        
                                                        // set the parameter as "" from the URL
                                                        params.set(paramName, '');

                                                        window.location.href = url.toString();
                                                      
                                                    }
                                                  });
                                                });
                                                
                                                const filterIcons = document.querySelectorAll('.Applied-Filters-Icon');
                                                filterIcons.forEach(icon => {
                                                  icon.addEventListener('click', function(event) {
                                                    event.stopPropagation();
                                                    
                                                    this.closest('.Applied-Filters').click();
                                                  });
                                                });
                                              });
                                            </script>
                                        </ul>
                                    </div>
                                </div>
                            </div>


                            <div class="Controls">

                                <div class="Controls-Text">
                                    Sort by: &nbsp;
                                </div>
                                <select aria-labelledby=_atlas-search_sort-label
                                        class="SortShowDropDown" id="SortByDropDown" style="padding: 6px 20px;">
    <option selected disabled value="blank">Select a sorting option</option>
    <option value="name-asc">Name (A–Z)</option>
    <option value="name-desc">Name (Z–A)</option>
    <option value="avg_rating-asc">Rating (Low to High)</option>
    <option value="avg_rating-desc">Rating (High to Low)</option>
    <option value="cost-asc">Cost (Low to High)</option>
    <option value="cost-desc">Cost (High to Low)</option>
    <option value="total_hours-asc">Total Hours (Low to High)</option>
    <option value="total_hours-desc">Total Hours (High to Low)</option>

</select>



<script src="{% static 'js/sorting.js' %}" type="text/javascript"></script>

                                &nbsp;&nbsp;

                                <div class="Controls-Text">
                                    Show: &nbsp;
                                </div>
                                <select class="SortShowDropDown" style="width:60px;" id="itemsPerPage">
                                    <option selected value=10>10
                                    <option value=20>20
                                    <option value=25>25
                                    <option value=50>50
                                    <option value=100>100
                                    <option value=150>150
                                    <option value=200>200
                                </select>




                            </div>
                        </div>
                    </div>
                </div>

                <div class="Lower-Main-Body-Area">

                    <div class="Main-Area Lower-Main-Body-Area-Border Content-Container">
                        <div class="Lower-Main-Body-Area-Inner">
                            <div class="Lower-Main-Body-Area-Content">

                                <!--left-side filters-->
                                <form action="{% url 'search_result' %}" method="GET" id="searchForm">
                                    
                                    <fieldset
                                        class="field-set__FieldSetStyled-sc-b2ie46-0 Filter-Section form__ConnectedFieldSetStyled-sr2rn8-1 Filter-Section-Outline"
                                        name="keywords">
                                        <legend class=" Filter-Section-Title-Outer">
                                            <div class="field-set__LegendContent-sc-b2ie46-2 Filter-Section-Title-Inner">
                                                Keywords
                                            </div>
                                        </legend>
                                        <div class="field-set__CollapsibleContainer-sc-b2ie46-4 Filter-Section-Action-Outer" style="margin-top: 2rem!important;">
                                            <div class="field-set__ContentContainer-sc-b2ie46-5 Filter-Section-Action-Inner">
                                                <div class="autosuggest__Container-sc-hb0rq-0 Input">
                                                    <div aria-expanded=false aria-haspopup=listbox
                                                        aria-owns=react-auto
                                                        class=react-autosuggest__container
                                                        role=combobox><input aria-autocomplete=list
                                                            aria-controls=react-auto
                                                            autocomplete=off
                                                            class="TextInput__TextInputDeprecated-ob7d2g-2 Input-Field form__TextInputStyled-sr2rn8-2 Filter-Section-Outline-Input react-autosuggest__input"
                                                            placeholder="Keywords"
                                                            name="keywords"
                                                            type=text
                                                            value="{{ keywords }}">
                                                            <div class="react-autosuggest__suggestions-container sf-hidden"
                                                                id=react-auto
                                                                role=listbox></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </fieldset>

                                    <fieldset
                                        class="field-set__FieldSetStyled-sc-b2ie46-0 Filter-Section form__ConnectedFieldSetStyled-sr2rn8-1 Filter-Section-Outline"
                                        name="provider">
                                        <legend class=" Filter-Section-Title-Outer">
                                            <div class="field-set__LegendContent-sc-b2ie46-2 Filter-Section-Title-Inner">
                                                Provider
                                            </div>
                                        </legend>
                                        <div class="field-set__CollapsibleContainer-sc-b2ie46-4 Filter-Section-Action-Outer" style="margin-top: 2rem!important;">
                                            <div class="field-set__ContentContainer-sc-b2ie46-5 Filter-Section-Action-Inner">
                                                <div class="autosuggest__Container-sc-hb0rq-0 Input">
                                                    <div aria-expanded=false aria-haspopup=listbox
                                                        aria-owns=react-auto
                                                        class=react-autosuggest__container
                                                        role=combobox><input aria-autocomplete=list
                                                            aria-controls=react-auto
                                                            autocomplete=off
                                                            class="TextInput__TextInputDeprecated-ob7d2g-2 Input-Field form__TextInputStyled-sr2rn8-2 Filter-Section-Outline-Input react-autosuggest__input"
                                                            placeholder="Provider"
                                                            name="provider"
                                                            type=text
                                                            value="{{ provider }}">
                                                            <div class="react-autosuggest__suggestions-container sf-hidden"
                                                                role=listbox></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </fieldset>

                                    <fieldset
                                        class="field-set__FieldSetStyled-sc-b2ie46-0 Filter-Section form__ConnectedFieldSetStyled-sr2rn8-1 Filter-Section-Outline"
                                        name="min rating">
                                        <legend class=" Filter-Section-Title-Outer">
                                            <div class="field-set__LegendContent-sc-b2ie46-2 Filter-Section-Title-Inner">
                                                Min Rating
                                            </div>
                                        </legend>
                                        <div class="field-set__CollapsibleContainer-sc-b2ie46-4 Filter-Section-Action-Outer" style="margin-top: 2rem!important;">
                                            <div class="field-set__ContentContainer-sc-b2ie46-5 Filter-Section-Action-Inner">
                                                <div class="autosuggest__Container-sc-hb0rq-0 Input">
                                                    <div aria-expanded=false aria-haspopup=listbox
                                                        aria-owns=react-auto
                                                        class=react-autosuggest__container
                                                        role=combobox><input aria-autocomplete=list
                                                            aria-controls=react-auto
                                                            autocomplete=off
                                                            class="TextInput__TextInputDeprecated-ob7d2g-2 Input-Field form__TextInputStyled-sr2rn8-2 Filter-Section-Outline-Input react-autosuggest__input"
                                                            placeholder="Min Rating"
                                                            name="min_rating"
                                                            type="number" step="0.1" min="0" max="5"
                                                            value="{{ min_rating }}">
                                                            <div class="react-autosuggest__suggestions-container sf-hidden"
                                                                role=listbox></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </fieldset>


                                    <fieldset
                                        class="field-set__FieldSetStyled-sc-b2ie46-0 Filter-Section form__ConnectedFieldSetStyled-sr2rn8-1 Filter-Section-Outline"
                                        name="min cost">
                                        <legend class=" Filter-Section-Title-Outer">
                                            <div class="field-set__LegendContent-sc-b2ie46-2 Filter-Section-Title-Inner">
                                                Min Cost
                                            </div>
                                        </legend>
                                        <div class="field-set__CollapsibleContainer-sc-b2ie46-4 Filter-Section-Action-Outer" style="margin-top: 2rem!important;">
                                            <div class="field-set__ContentContainer-sc-b2ie46-5 Filter-Section-Action-Inner">
                                                <div class="autosuggest__Container-sc-hb0rq-0 Input">
                                                    <div aria-expanded=false aria-haspopup=listbox
                                                        aria-owns=react-auto
                                                        class=react-autosuggest__container
                                                        role=combobox><input aria-autocomplete=list
                                                            aria-controls=react-auto
                                                            autocomplete=off
                                                            class="TextInput__TextInputDeprecated-ob7d2g-2 Input-Field form__TextInputStyled-sr2rn8-2 Filter-Section-Outline-Input react-autosuggest__input"
                                                            name="min_cost"
                                                            placeholder="Min Cost"
                                                            type="number"  min="0"
                                                            step="1"
                                                            value="{{ min_cost }}">
                                                            <div class="react-autosuggest__suggestions-container sf-hidden"
                                                                role=listbox></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </fieldset>
                                    
                                    <fieldset
                                        class="field-set__FieldSetStyled-sc-b2ie46-0 Filter-Section form__ConnectedFieldSetStyled-sr2rn8-1 Filter-Section-Outline"
                                        name="max cost">
                                        <legend class=" Filter-Section-Title-Outer">
                                            <div class="field-set__LegendContent-sc-b2ie46-2 Filter-Section-Title-Inner">
                                                Max Cost
                                            </div>
                                        </legend>
                                        <div class="field-set__CollapsibleContainer-sc-b2ie46-4 Filter-Section-Action-Outer" style="margin-top: 2rem!important;">
                                            <div class="field-set__ContentContainer-sc-b2ie46-5 Filter-Section-Action-Inner">
                                                <div class="autosuggest__Container-sc-hb0rq-0 Input">
                                                    <div aria-expanded=false aria-haspopup=listbox
                                                        aria-owns=react-auto
                                                        class=react-autosuggest__container
                                                        role=combobox><input aria-autocomplete=list
                                                            aria-controls=react-auto
                                                            autocomplete=off
                                                            class="TextInput__TextInputDeprecated-ob7d2g-2 Input-Field form__TextInputStyled-sr2rn8-2 Filter-Section-Outline-Input react-autosuggest__input"
                                                            name="max_cost"
                                                            placeholder="Max Cost"
                                                            type="number"  min="0"
                                                            step="1"
                                                            value="{{ max_cost }}">
                                                            <div class="react-autosuggest__suggestions-container sf-hidden"
                                                                role=listbox></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </fieldset>
                                    
                                    <fieldset
                                        class="field-set__FieldSetStyled-sc-b2ie46-0 Filter-Section form__ConnectedFieldSetStyled-sr2rn8-1 Filter-Section-Outline"
                                        name="location">
                                        <legend class=" Filter-Section-Title-Outer">
                                            <div class="field-set__LegendContent-sc-b2ie46-2 Filter-Section-Title-Inner">
                                                Location
                                            </div>
                                        </legend>
                                        <div class="field-set__CollapsibleContainer-sc-b2ie46-4 Filter-Section-Action-Outer" style="margin-top: 2rem!important;">
                                            <div class="field-set__ContentContainer-sc-b2ie46-5 Filter-Section-Action-Inner">
                                                <div class="autosuggest__Container-sc-hb0rq-0 Input">
                                                    <div aria-expanded=false aria-haspopup=listbox
                                                        aria-owns=location-input
                                                        class=react-autosuggest__container
                                                        role=combobox><input aria-autocomplete=list
                                                            aria-controls=location-input
                                                            autocomplete=off
                                                            class="TextInput__TextInputDeprecated-ob7d2g-2 Input-Field form__TextInputStyled-sr2rn8-2 Filter-Section-Outline-Input react-autosuggest__input"
                                                            name="location"
                                                            placeholder="City, State or ZIP"
                                                            type=text
                                                            value="{{ location }}">
                                                            <div class="react-autosuggest__suggestions-container sf-hidden"
                                                                id=location-input
                                                                role=listbox>
                                                            </div>
                                                    </div>
                                                </div>
                                                <div style="margin-bottom: 0.5rem !important;"></div>
                                            </div>
                                        </div>
                                        <script>
                                            document.addEventListener("DOMContentLoaded", function () {
                                                var selectElement = document.querySelector(".All-Distances-Content-Box");
                                                
                                                selectElement.addEventListener("change", function () {
                                                    if (selectElement.value === "") {
                                                        selectElement.style.color = "darkgray"; // Keep dark gray for "All Distances"
                                                    } else {
                                                        selectElement.style.color = "black"; // Change to black for other options
                                                    }
                                                });
                                            });



                                        </script>
                                    </fieldset>
                                    
                                    <fieldset
                                        class="field-set__FieldSetStyled-sc-b2ie46-0 Filter-Section form__ConnectedFieldSetStyled-sr2rn8-1 Filter-Section-Outline"
                                        name="min hours">
                                        <legend class=" Filter-Section-Title-Outer">
                                            <div class="field-set__LegendContent-sc-b2ie46-2 Filter-Section-Title-Inner">
                                                Min Hours
                                            </div>
                                        </legend>
                                        <div class="field-set__CollapsibleContainer-sc-b2ie46-4 Filter-Section-Action-Outer" style="margin-top: 2rem!important;">
                                            <div class="field-set__ContentContainer-sc-b2ie46-5 Filter-Section-Action-Inner">
                                                <div class="autosuggest__Container-sc-hb0rq-0 Input">
                                                    <div aria-expanded=false aria-haspopup=listbox
                                                        aria-owns=react-auto
                                                        class=react-autosuggest__container
                                                        role=combobox><input aria-autocomplete=list
                                                            aria-controls=react-auto
                                                            autocomplete=off
                                                            class="TextInput__TextInputDeprecated-ob7d2g-2 Input-Field form__TextInputStyled-sr2rn8-2 Filter-Section-Outline-Input react-autosuggest__input"
                                                            name="min_hours"
                                                            placeholder="Min Hours"
                                                            type="number"  min="0"
                                                            step="1"
                                                            value="{{min_hours}}">
                                                            <div class="react-autosuggest__suggestions-container sf-hidden"
                                                                role=listbox></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </fieldset>
                                    
                                    <fieldset class="Filter-Section Filter-Section-Outline" style="border-bottom: none;">
                                        
                                        <legend class="Filter-Section-Title-Outer">
                                            <div class="Filter-Section-Title-Inner">
                                                Apply Filters
                                            </div>
                                        </legend>
                                        
                                        <div class="Filter-Section-Action-Outer" style="margin-top: 2rem!important;">
                                            <div class="Filter-Section-Action-Inner">
                                                <button type="submit" class="Apply-Filters-Button">
                                                    Filter Your Search
                                                </button>
                                            </div>
                                        </div>
                                    </fieldset>
                                    
                                </form>

                                <!--courses-->
                                <div class="All-Course-Container" id ="All-Course-Container">
                                    {% include 'courses/courses_section.html' %}
                                </div>

                            </div>
                        </div>
                    </div>

                </div>

            </div>


        </article>


        <!--Pagination-->
       <div id="pagination" class="Pagination">
    <button id="prevPage" disabled style="border-radius: 5px;">&laquo; Prev</button>
    <span id="pageInfo">Page 1</span>
    <button id="nextPage" style="border-radius: 5px;">Next &raquo;</button>
</div>


<script src="{% static 'js/pagination.js' %}"></script>

        <hr style="margin-top: 56px; border:none; border-bottom: 1px solid rgb(211, 215, 220)!important;">

            <!--footer-->

           {% include 'includes/footer.html' %}
        {% include 'courses/course_comparison_container.html' %}

<link rel="stylesheet" href="{% static 'css/bookmark.css' %}">


<div class="modal fade" id="bookmarkModal" tabindex="-1" aria-labelledby="bookmarkModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content glass-modal">
      <form id="bookmarkForm">
        {% csrf_token %}
        <input type="hidden" name="course_id" id="modalCourseId">

        <div class="modal-header border-0">
          <h5 class="modal-title modal-header-text" id="bookmarkModalLabel">
            ➕ Add Bookmark for <span id="courseNameDisplay"></span>
          </h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>

        <div id="bookmarkError" class="alert alert-info" style="display: none;margin-left: 1rem; margin-right: 1rem;"></div>
        <div id="bookmarkSuccess" class="alert alert-info" style="display: none;margin-left: 1rem; margin-right: 1rem;"></div>

        <div class="modal-body">
          {% if bookmark_lists %}
            <label for="bookmarkList" class="modal-label">Choose Bookmark List:</label>
            <select name="bookmark_list" id="bookmarkList" class="modal-select">
              {% for list in bookmark_lists %}
              <option value="{{ list.list_id }}"
                {% if default_bookmark_list and list.list_id == default_bookmark_list.list_id %} selected {% endif %}>
                {{ list.name }}
              </option>
              {% endfor %}
            </select>
          {% else %}
            <p class="alert alert-info">You don't have any bookmark lists yet.</p>
          {% endif %}

          <div class="modal-footer aligned-footer border-0">
            {% if bookmark_lists %}
              <button type="button" class="cancel-button" data-bs-dismiss="modal">Cancel</button>
              <button type="submit" class="create-button">Add</button>
            {% else %}
              <button type="button" class="cancel-button" data-bs-dismiss="modal">Cancel</button>
              <button onclick="window.location.href='{% url 'bookmark_list' %}'" class="create-button">Create List</button>

            {% endif %}
          </div>
        </div>
      </form>
    </div>
  </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", function () {
  window.openBookmarkModal = function(courseId, courseName) {
    const modal = new bootstrap.Modal(document.getElementById('bookmarkModal'));
    document.getElementById("modalCourseId").value = courseId;
    document.getElementById("courseNameDisplay").textContent = courseName;
    document.getElementById("bookmarkError").style.display = "none";
    modal.show();
  };

  document.getElementById("bookmarkForm")?.addEventListener("submit", async function (e) {
    e.preventDefault();
    const courseId = document.getElementById("modalCourseId").value;
    const bookmarkListId = document.getElementById("bookmarkList").value;
    const csrfToken = document.querySelector('[name=csrfmiddlewaretoken]').value;

    const response = await fetch(`/bookmarks/courses/${courseId}/add_bookmark/`, {
      method: "POST",
      headers: {
        "Content-Type": "application/x-www-form-urlencoded",
        "X-CSRFToken": csrfToken,
      },
      body: `bookmark_list=${bookmarkListId}`
    });

    const resultHTML = await response.text();

    if (response.redirected) {
      document.getElementById("bookmarkSuccess").textContent = "✅ Course bookmarked successfully!";
      document.getElementById("bookmarkSuccess").style.display = "block";
      setTimeout(() => {
        const modalInstance = bootstrap.Modal.getInstance(document.getElementById('bookmarkModal'));
        modalInstance.hide();
        location.reload();
      }, 2000);
    } else {
      const tempDiv = document.createElement('div');
      tempDiv.innerHTML = resultHTML;
      const messageText = tempDiv.querySelector('.alert-info');
      if (messageText) {
        const errorBox = document.getElementById("bookmarkError");
        errorBox.innerHTML = messageText.innerHTML;
        errorBox.style.display = "block";
      }
    }
  });
});
</script>  </div>
    </main>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Get CSRF token from cookies
        function getCookie(name) {
            let cookieValue = null;
            if (document.cookie && document.cookie !== '') {
                const cookies = document.cookie.split(';');
                for (let i = 0; i < cookies.length; i++) {
                    const cookie = cookies[i].trim();
                    if (cookie.substring(0, name.length + 1) === (name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            return cookieValue;
        }
        const csrfToken = getCookie('csrftoken');

        // show comparison panel function
        function showComparisonPanel() {
            const collapsedPanel = document.getElementById('CollapsedCompareCoursesTab');
            const expandedPanel = document.getElementById('ExpandedCompareCoursesPanel');
            
            if (collapsedPanel && expandedPanel) {
                collapsedPanel.style.display = 'none';
                expandedPanel.style.display = '';
            }
        }
        
        // hide comparison panel function
        function hideComparisonPanel() {
            const collapsedPanel = document.getElementById('CollapsedCompareCoursesTab');
            const expandedPanel = document.getElementById('ExpandedCompareCoursesPanel');
            
            if (collapsedPanel && expandedPanel) {
                collapsedPanel.style.display = '';
                expandedPanel.style.display = 'none';
            }
        }

        function addToComparison(courseId, checkboxElement) {
            fetch('{% url "add_to_comparison" %}', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'X-CSRFToken': csrfToken,
                    'X-Requested-With': 'XMLHttpRequest'
                },
                body: JSON.stringify({ course_id: courseId })
            })
            .then(res => res.json())
            .then(data => {
                if (data.success) {
                    updateComparisonPanel(data);
                    showComparisonPanel();
                } else {
                    alert(data.message);
                    if (checkboxElement) checkboxElement.checked = false;
                }
            })
            .catch((error) => {
                console.error('Error:', error);
                alert('Network error, unable to add course to comparison');
                if (checkboxElement) checkboxElement.checked = false;
            });
        }

        function removeFromComparison(courseId) {
            fetch('{% url "remove_from_comparison" %}', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'X-CSRFToken': csrfToken,
                    'X-Requested-With': 'XMLHttpRequest'
                },
                body: JSON.stringify({ course_id: courseId })
            })
            .then(res => res.json())
            .then(data => {
                if (data.success) {
                    const courseElement = document.querySelector(`.VocationalCourseAndProviderClassTwo[data-course-id="${courseId}"]`);
                    if (courseElement) {
                        courseElement.remove();
                    }
                    
                    // update counter
                    const counterElement = document.querySelector('.VocationalCourseAndProviderButtonOne');
                    if (counterElement) {
                        counterElement.textContent = data.count;
                    }
                    
                    // update compare button state
                    const compareButton = document.getElementById('compare-courses-btn');
                    if (compareButton) {
                        compareButton.disabled = data.count < 2;
                    }
                    
                    // If the comparison list is empty, show the empty message
                    if (data.count === 0) {
                        const comparisonList = document.querySelector('.VocationalCourseAndProviderContainerFour');
                        if (comparisonList) {
                            comparisonList.innerHTML = `
                                <div class="empty-comparison-message" style="text-align: center; padding: 20px;">
                                    <p>No courses added to comparison yet.</p>
                                </div>
                            `;
                        }
                    }
                } else {
                    console.error('Error:', data.message);
                    alert(data.message || 'Failed to remove course from comparison');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert('Network error, unable to remove course from comparison');
            });
        }
        
        function clearAllCourses() {
            fetch('{% url "clear_comparison" %}', {
                method: 'POST',  
                headers: {
                    'Content-Type': 'application/json', 
                    'X-CSRFToken': csrfToken,
                    'X-Requested-With': 'XMLHttpRequest'
                },
                body: JSON.stringify({})
            })
            .then(res => {
                if (!res.ok) {
                    throw new Error('Network response error');
                }
                return res.json();
            })
            .then(data => {
                if (data.success) {
                    // Remove all course elements
                    document.querySelectorAll('.VocationalCourseAndProviderClassTwo').forEach(el => el.remove());
                    updateCounterAndButton(0);
                    
                    document.querySelectorAll('.Hidden-Input:checked').forEach(checkbox => {
                        checkbox.checked = false;
                    });
                    
                    const comparisonList = document.querySelector('.VocationalCourseAndProviderContainerFour');
                    if (comparisonList) {
                        comparisonList.innerHTML = `
                            <div class="empty-comparison-message" style="text-align: center; padding: 20px;">
                                <p>No courses added to comparison yet.</p>
                            </div>
                        `;
                    }

                    hideComparisonPanel();
                } else {
                    console.error('Error:', data.message);
                    alert('Failed to clear comparison list');
                }
            })
            .catch((error) => {
                console.error('Error:', error);
                alert('Network error, unable to clear comparison list');
            });
        }

        function updateComparisonPanel(data) {
            const comparisonList = document.querySelector('.VocationalCourseAndProviderContainerFour');
            if (!comparisonList) return;
            
            const existingCourse = document.querySelector(`.VocationalCourseAndProviderClassTwo[data-course-id="${data.course.id}"]`);
            if (existingCourse) return;
            
            const emptyMessage = comparisonList.querySelector('.empty-comparison-message');
            if (emptyMessage) {
                emptyMessage.remove();
            }

            const courseElement = document.createElement('div');
            courseElement.className = 'VocationalCourseAndProviderContainer VocationalCourseAndProviderClassTwo';
            courseElement.setAttribute('data-course-id', data.course.id);
            
            courseElement.innerHTML = `
                <svg class="VocationalCourseAndProviderSVGThree VocationalCourseAndProviderSVGFour remove-from-comparison" 
                    data-course-id="${data.course.id}" fill="gray50" height="0.625rem" role="img" width="0.625rem">
                    <use filter="0" xlink:href="#x-close"></use>
                </svg>
                <p class="VocationalCourseNameClassOne VocationalCourseNameClassTwo">${data.course.name}</p>
                <p class="VocationalCourseProviderNameClassOne VocationalCourseProviderNameClassTwo">${data.course.provider_name}</p>
            `;
            
            comparisonList.appendChild(courseElement);

            updateCounterAndButton(data.count);
        }

        function updateCounterAndButton(count) {
            // update counter
            const counterElement = document.querySelector('.VocationalCourseAndProviderButtonOne');
            if (counterElement) {
                counterElement.textContent = count;
            }
            
            // update compare button state
            const compareButton = document.getElementById('compare-courses-btn');
            if (compareButton) {
                compareButton.disabled = count < 2;
            }
        }
        
        function handleCheckboxChange(e){
            e.stopPropagation();
                
            const courseId = this.value;
            console.log('Change:', this.checked ? 'Yes' : 'Cancel', 'Course ID:', courseId);

            if (this.checked) {
                addToComparison(courseId, this);
            } else {
                removeFromComparison(courseId, this);
            }

        }

        function handleRemoveButtonClick(e){
            e.stopPropagation();
            const courseId = this.getAttribute('data-course-id');
            
            const checkbox = document.querySelector(`.Hidden-Input[data-course-id="${courseId}"]`);
            if (checkbox) {
                checkbox.checked = false;
                const event = new Event('change');
                checkbox.dispatchEvent(event);
            } else {
                removeFromComparison(courseId);
            }
        }

        function handleClearButtonClick() {
            console.log('Clear all courses');
            clearAllCourses();
        }

        function handleFormSubmit(e) {
            e.preventDefault();
            
            const courseIds = [];
            document.querySelectorAll('.VocationalCourseAndProviderClassTwo[data-course-id]').forEach(function(el) {
                courseIds.push(el.getAttribute('data-course-id'));
            });
            
            if (courseIds.length < 2) {
                alert('Choose at least 2 courses to compare!');
                return;
            }
            

            this.querySelectorAll('input[name="course_ids"]').forEach(input => input.remove());
            
            courseIds.forEach(id => {
                const input = document.createElement('input');
                input.type = 'hidden';
                input.name = 'course_ids';
                input.value = id;
                this.appendChild(input);
            });
            
            console.log('Form includes:', this.querySelectorAll('input[name="course_ids"]').length, 'courses');

            this.submit();
        }

        // Add event listeners 
        // checkbox change event listener
        document.querySelectorAll('.Hidden-Input').forEach(function(checkbox) {
            checkbox.addEventListener('change', handleCheckboxChange);
        });

        document.querySelectorAll('.remove-from-comparison').forEach(function(button) {
            button.addEventListener('click', handleRemoveButtonClick);
        });

        const expandButton = document.getElementById('ExpandButton');
        if (expandButton) {
            expandButton.addEventListener('click', function(e) {
                e.stopPropagation();
                showComparisonPanel();
            });
        }
        
        const collapseButton = document.getElementById('CollapseButton');
        if (collapseButton) {
            collapseButton.addEventListener('click', function(e) {
                e.stopPropagation();
                hideComparisonPanel();
            });
        }
        
        const clearBtn = document.getElementById('clear-comparison-btn');
        if (clearBtn) {  
            clearBtn.addEventListener('click', handleClearButtonClick);
        } else {
            console.warn('Clear button not found.');
        }

        const comparisonForm = document.querySelector('form[action*="course_comparison"]');
        if (comparisonForm) {
            comparisonForm.addEventListener('submit', handleFormSubmit);
        } else {
            console.warn('Form not found');
        }

        const comparisonList = document.getElementById('comparisonList');
        comparisonList.addEventListener('click', e => {
            const btn = e.target.closest('.remove-from-comparison');
            if (!btn) return;
            e.stopPropagation();
            handleRemoveButtonClick.call(btn, e);
        });


        // Initially check the checkboxes for courses already in the comparison list
        const comparisonCourses = document.querySelectorAll('.VocationalCourseAndProviderClassTwo[data-course-id]');
        comparisonCourses.forEach(function(courseElement) {
            const courseId = courseElement.getAttribute('data-course-id');
            const checkbox = document.querySelector(`.Hidden-Input[data-course-id="${courseId}"]`);
            if (checkbox) {
                checkbox.checked = true;
            }
        });
        
        // If there are any courses in the comparison list, show the comparison panel
        if (comparisonCourses.length > 0) {
            showComparisonPanel();
        }

        
    });

</script>


</body>
</html>