{% load static %}
{% block content %}

    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>{% block title %}Reset Password{% endblock %}</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
        <link rel="icon" type="image/png" href="{% static 'images/favicon.png' %}">
        <link rel="stylesheet" href="{% static 'css/course_list.css' %}">
        <link rel="stylesheet" href="{% static 'css/globals.css' %}">
        <link rel="stylesheet" href="{% static 'css/password_reset.css' %}">
    </head>
    <body>
    {% if user.role == "career_changer" %}
        {% include 'includes/student_header.html' %}
    {% elif user.role == "training_provider" %}
        {% include 'includes/provider_header.html' %}
    {% else %}
        {% include 'includes/default_header.html' %}
    {% endif %}
    <hr style="margin-bottom:43px; border:none; border-bottom: 1px solid rgb(211, 215, 220)!important;">

    {% if token_fail %}
        
        <script>
            setTimeout(() => {
                alert("The password reset link was invalid. Please request a new one.");

                {% if user.role == "training_provider" %}
                    window.location.href = "{% url 'manage_courses' %}";
                {% else %}
                    window.location.href = "{% url 'course_list' %}";
                {% endif %}

            }, 50);
        </script>
        
    {% else %}
        
        <div class="main-content">
            <div class="main-container">

                <h1 class="main-header">Set Your New Password</h1>

                <form>
                    
                    <label for="your_username" class="Customized-Label">Username:</label><br>
                    <input type="text" id="your_username" name="your_username" class="Customized-Input" value="{{ user.username }}"
                           disabled>

                    <label for="your_email_address" class="Customized-Label">Email Address:</label><br>
                    <input type="text" id="your_email_address" name="your_email_address" class="Customized-Input"
                           value="{{ user.email }}" disabled>


                    <label for="new_password" class="Customized-Label">New Password:</label><br>
                    <input type="password" id="new_password" name="new_password" class="Customized-Input" required>
                    <button type="submit" class="cta-button">⚙️ Reset Password</button>


                </form>
                
            </div>
        </div>
        
    {% endif %}
    
    <hr style="margin-top: 56px; border:none; border-bottom: 1px solid rgb(211, 215, 220)!important;">
    {% include 'includes/footer.html' %}
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    </body>
    </html>
{% endblock %}